<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff" id="theme-color-meta">
  <title>Material Definition System (MDS) — Technical Demonstration</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Times New Roman', 'Georgia', serif;
      font-size: 16px;
      line-height: 1.6;
      color: #000;
      background: #fff;
      padding: 40px 20px;
      max-width: 900px;
      margin: 0 auto;
    }

    body[data-theme="dark"] {
      background: #000;
      color: #fff;
    }

    /* Typography */
    h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 8px;
      text-align: center;
      letter-spacing: -0.02em;
    }

    h2 {
      font-size: 20px;
      font-weight: bold;
      margin-top: 40px;
      margin-bottom: 16px;
      border-bottom: 1px solid currentColor;
      padding-bottom: 4px;
    }

    p {
      margin-bottom: 12px;
      text-align: justify;
    }

    .subtitle {
      text-align: center;
      font-style: italic;
      margin-bottom: 32px;
      font-size: 14px;
    }

    .abstract {
      margin: 32px 0;
      padding: 16px 24px;
      border: 1px solid currentColor;
    }

    .abstract-title {
      font-weight: bold;
      margin-bottom: 8px;
    }

    /* Code */
    code {
      font-family: 'Courier New', monospace;
      font-size: 14px;
      background: rgba(0, 0, 0, 0.05);
      padding: 2px 6px;
      border-radius: 3px;
    }

    body[data-theme="dark"] code {
      background: rgba(255, 255, 255, 0.1);
    }

    pre {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      background: rgba(0, 0, 0, 0.03);
      padding: 16px;
      border: 1px solid currentColor;
      overflow-x: auto;
      margin: 16px 0;
      line-height: 1.4;
    }

    body[data-theme="dark"] pre {
      background: rgba(255, 255, 255, 0.05);
    }

    /* Specimens */
    .specimen-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 32px;
      margin: 32px 0;
      padding: 24px 0;
      border-top: 1px solid currentColor;
      border-bottom: 1px solid currentColor;
    }

    .specimen {
      text-align: center;
    }

    .specimen-sample {
      width: 240px;
      height: 240px;
      margin: 0 auto 16px;
      border: 1px solid currentColor;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 72px;
      font-weight: bold;
      position: relative;
    }

    .specimen-label {
      font-weight: bold;
      margin-bottom: 4px;
      font-size: 14px;
    }

    .specimen-desc {
      font-size: 12px;
      font-style: italic;
      color: #666;
    }

    body[data-theme="dark"] .specimen-desc {
      color: #999;
    }

    /* Controls */
    .controls {
      margin: 32px 0;
      padding: 16px;
      border: 1px solid currentColor;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
    }

    .control-group {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .control-label {
      font-size: 14px;
      font-weight: bold;
    }

    button {
      font-family: 'Times New Roman', 'Georgia', serif;
      font-size: 14px;
      padding: 6px 16px;
      background: transparent;
      border: 1px solid currentColor;
      color: currentColor;
      cursor: pointer;
      transition: all 0.2s;
    }

    button:hover {
      background: #000;
      color: #fff;
    }

    body[data-theme="dark"] button:hover {
      background: #fff;
      color: #000;
    }

    button.active {
      background: #000;
      color: #fff;
    }

    body[data-theme="dark"] button.active {
      background: #fff;
      color: #000;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }

    th, td {
      border: 1px solid currentColor;
      padding: 8px 12px;
      text-align: left;
    }

    th {
      font-weight: bold;
      background: rgba(0, 0, 0, 0.05);
    }

    body[data-theme="dark"] th {
      background: rgba(255, 255, 255, 0.05);
    }

    /* Figure */
    .figure {
      margin: 32px 0;
      text-align: center;
    }

    .figure-caption {
      font-size: 13px;
      font-style: italic;
      margin-top: 8px;
      text-align: center;
    }

    /* Background pattern for blur demonstration */
    .blur-demo-bg {
      position: fixed;
      inset: 0;
      z-index: -1;
      opacity: 0;
      transition: opacity 0.3s;
      background:
        repeating-linear-gradient(45deg,
          transparent,
          transparent 10px,
          rgba(0,0,0,0.03) 10px,
          rgba(0,0,0,0.03) 20px);
    }

    body[data-theme="dark"] .blur-demo-bg {
      background:
        repeating-linear-gradient(45deg,
          transparent,
          transparent 10px,
          rgba(255,255,255,0.03) 10px,
          rgba(255,255,255,0.03) 20px);
    }

    .blur-demo-bg.active {
      opacity: 1;
    }

    /* Footer */
    footer {
      margin-top: 64px;
      padding-top: 16px;
      border-top: 1px solid currentColor;
      font-size: 12px;
      text-align: center;
      color: #666;
    }

    body[data-theme="dark"] footer {
      color: #999;
    }
  </style>
</head>
<body data-theme="light">

  <!-- Background pattern for blur demonstration -->
  <div class="blur-demo-bg" id="blur-bg"></div>

  <!-- Header -->
  <h1>Material Definition System</h1>
  <p class="subtitle">A Schema-Driven Approach to DOM Material Properties</p>

  <!-- Abstract -->
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    <p>
      We present Material Definition System (MDS), a runtime that applies visual properties
      to DOM elements through declarative JSON manifests (MDSpec schema). The architecture separates
      <em>optics</em>, <em>surface</em>, and <em>behavior</em> into distinct domains.
      This demonstration includes two basic materials (glass-fake, paper) that prove the architecture works,
      but produce minimal visual effects due to CSS/DOM limitations. The goal is architectural correctness,
      not photorealistic rendering. Do not expect dramatic visual results.
    </p>
  </div>

  <!-- Section 1: Methodology -->
  <h2>1. Methodology</h2>

  <p>
    Materials are registered via the global <code>MaterialSystem</code> API and applied to elements
    bearing the <code>data-material</code> attribute. The runtime performs the following operations:
  </p>

  <ol style="margin-left: 24px; margin-bottom: 16px;">
    <li>Parse material name and resolve manifest (JSON or programmatic)</li>
    <li>Merge inheritance chain: base → theme → state</li>
    <li>Map material properties to CSS inline styles and filters</li>
    <li>Attach event listeners for state transitions (pointer, focus)</li>
    <li>Observe DOM mutations for dynamic element application</li>
  </ol>

  <pre>// Example: Material Registration
MaterialSystem.register('glass-liquid', {
  optics: {
    backgroundColor: 'rgba(255, 255, 255, 0.08)',
    backdropFilter: 'blur(4px)',
    color: '#ffffff'
  },
  surface: {
    border: '1px solid rgba(255, 255, 255, 0.25)',
    shadow: [...] // 10-layer system
  }
})</pre>

  <!-- Section 2: Specimens -->
  <h2>2. Reference Implementations</h2>

  <p>
    Two materials are provided as proof-of-concept only.
    <strong>Specimen A</strong> (glass-fake) uses backdrop blur and shadows—the effect is minimal
    and nearly invisible without a patterned background.
    <strong>Specimen B</strong> (paper) has subtle noise texture that may not be visible on most displays.
    These are architectural demonstrations, not production-ready visual effects.
  </p>

  <div class="figure">
    <div class="specimen-grid">
      <!-- Specimen A: Glass -->
      <div class="specimen">
        <div class="specimen-sample" data-material="glass-liquid">
          A
        </div>
        <div class="specimen-label">Specimen A</div>
        <div class="specimen-desc">glass-fake (simplified)</div>
      </div>

      <!-- Specimen B: Paper -->
      <div class="specimen">
        <div class="specimen-sample" data-material="paper">
          B
        </div>
        <div class="specimen-label">Specimen B</div>
        <div class="specimen-desc">paper</div>
      </div>
    </div>
    <div class="figure-caption">
      Figure 1: Material specimens under controlled conditions
    </div>
  </div>

  <!-- Controls -->
  <div class="controls">
    <div class="control-group">
      <span class="control-label">Theme:</span>
      <button id="btn-light" class="active">Light</button>
      <button id="btn-dark">Dark</button>
    </div>
    <div class="control-group">
      <button id="btn-blur-toggle">Show Background Pattern</button>
    </div>
  </div>

  <!-- Section 3: Properties -->
  <h2>3. Material Properties</h2>

  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Glass (Simplified)</th>
        <th>Paper</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>backdrop-filter</code></td>
        <td>blur(4px)</td>
        <td>—</td>
      </tr>
      <tr>
        <td><code>backgroundColor</code></td>
        <td>rgba(255,255,255,0.08)</td>
        <td>#ffffff (solid)</td>
      </tr>
      <tr>
        <td><code>shadow (layers)</code></td>
        <td>10 (inset + depth)</td>
        <td>—</td>
      </tr>
      <tr>
        <td><code>texture</code></td>
        <td>—</td>
        <td>SVG fractal noise</td>
      </tr>
      <tr>
        <td><code>transition</code></td>
        <td>400ms cubic-bezier</td>
        <td>—</td>
      </tr>
    </tbody>
  </table>

  <!-- Section 4: Observations -->
  <h2>4. Observations</h2>

  <p>
    <strong>Backdrop Blur:</strong> Specimen A uses 4px blur. Enable "Show Background Pattern" to see
    the blur effect—otherwise it's just a transparent rectangle with barely visible shadows.
  </p>

  <p>
    <strong>Visual Limitations:</strong> The glass effect is nearly identical in light/dark themes because
    it's transparent. The tint changes (white → black) but human eyes cannot distinguish this on a solid background.
    This is a fundamental limitation of CSS-based glass effects.
  </p>

  <p>
    <strong>Paper Material:</strong> Specimen B has subtle SVG noise texture (0.02 alpha in light mode,
    0.015 alpha in dark). The texture is barely visible and may appear as a plain solid color on most displays.
  </p>

  <p>
    <strong>Honest Assessment:</strong> These materials demonstrate the MDS architecture,
    but visual results are minimal due to CSS/DOM constraints.
    Do not expect dramatic glass effects or highly visible material differences.
  </p>

  <!-- Section 5: Implementation -->
  <h2>5. Implementation Details</h2>

  <pre>// HTML Usage (declarative)
&lt;div data-material="glass-liquid"&gt;
  Content
&lt;/div&gt;

// Theme control
MaterialSystem.setTheme('dark')</pre>

  <p>
    Runtime size: <strong>4.34 KB</strong> (gzipped UMD).
    Zero dependencies. Compatible with iOS ≥14, Safari ≥14, Chrome ≥90, Firefox ≥88.
  </p>

  <!-- Footer -->
  <footer>
    Material Definition System (MDS) — Technical Demonstration<br>
    2025 © MIT License
  </footer>

  <!-- Load MDS -->
  <script src="./dist/mds.umd.js"></script>

  <!-- Vercel Analytics -->
  <script type="module">
    import { inject } from './node_modules/@vercel/analytics/dist/index.mjs'
    inject()
  </script>

  <script>
    // Load official materials from manifest files
    async function loadMaterials() {
      const [glassFake, paper] = await Promise.all([
        fetch('./manifests/@mds/glass-fake.mdm.json').then(r => r.json()),
        fetch('./manifests/@mds/paper.mdm.json').then(r => r.json())
      ])

      MaterialSystem.register('glass-liquid', glassFake)
      MaterialSystem.register('paper', paper)
      MaterialSystem.apply()
    }

    // Initialize UI after materials load
    loadMaterials().then(() => {
      console.log('✅ Materials loaded from manifest files')
    }).catch(err => {
      console.error('❌ Failed to load materials:', err)
    })

    // Theme switching
    const btnLight = document.getElementById('btn-light')
    const btnDark = document.getElementById('btn-dark')
    const themeColorMeta = document.getElementById('theme-color-meta')

    function setTheme(theme) {
      document.body.setAttribute('data-theme', theme)
      MaterialSystem.setTheme(theme)

      if (theme === 'light') {
        btnLight.classList.add('active')
        btnDark.classList.remove('active')
        themeColorMeta.setAttribute('content', '#ffffff')
      } else {
        btnDark.classList.add('active')
        btnLight.classList.remove('active')
        themeColorMeta.setAttribute('content', '#000000')
      }
    }

    btnLight.addEventListener('click', () => setTheme('light'))
    btnDark.addEventListener('click', () => setTheme('dark'))

    // Blur pattern toggle
    const btnBlurToggle = document.getElementById('btn-blur-toggle')
    const blurBg = document.getElementById('blur-bg')
    let blurActive = false

    btnBlurToggle.addEventListener('click', () => {
      blurActive = !blurActive
      blurBg.classList.toggle('active', blurActive)
      btnBlurToggle.textContent = blurActive ? 'Hide Background Pattern' : 'Show Background Pattern'
    })
  </script>

</body>
</html>
