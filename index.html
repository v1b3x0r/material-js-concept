<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MDS v4.0 ‚Äî Living Materials Sandbox üåå</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #0e0f12;
      color: #eee;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
      cursor: crosshair;
    }

    /* Entity styles */
    .mds-entity {
      position: absolute;
      font-size: 48px;
      user-select: none;
      will-change: transform, opacity, filter;
      transition: filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    /* Field styles */
    .mds-field {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      will-change: opacity, transform;
      animation: field-pulse 3s ease-in-out infinite;
    }

    @keyframes field-pulse {
      0%, 100% { opacity: 0.6; transform: scale(1); }
      50% { opacity: 0.9; transform: scale(1.08); }
    }

    /* Dev tools overlay */
    #dev-tools {
      position: fixed;
      top: 16px;
      right: 16px;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      color: #fff;
      padding: 16px;
      border-radius: 12px;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      line-height: 1.6;
      border: 1px solid rgba(255, 220, 120, 0.2);
      min-width: 200px;
      z-index: 1000;
    }

    #dev-tools strong {
      color: #ffdc78;
      font-size: 12px;
      display: block;
      margin-bottom: 8px;
    }

    #dev-tools .stat {
      display: flex;
      justify-content: space-between;
      margin: 4px 0;
    }

    #dev-tools .stat-label {
      color: #999;
    }

    #dev-tools .stat-value {
      color: #fff;
      font-weight: bold;
    }

    #dev-tools button {
      font-family: 'Courier New', monospace;
      font-size: 11px;
      padding: 6px 12px;
      margin: 8px 4px 0 0;
      background: rgba(255, 220, 120, 0.1);
      border: 1px solid rgba(255, 220, 120, 0.3);
      color: #ffdc78;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    #dev-tools button:hover {
      background: rgba(255, 220, 120, 0.2);
      border-color: #ffdc78;
    }

    #dev-tools button:active {
      transform: scale(0.95);
    }

    /* Entity details (bottom-left) */
    #entity-details {
      position: fixed;
      bottom: 16px;
      left: 16px;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      color: #fff;
      padding: 12px;
      border-radius: 12px;
      font-family: 'Courier New', monospace;
      font-size: 10px;
      line-height: 1.5;
      border: 1px solid rgba(255, 220, 120, 0.2);
      max-width: 280px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
      z-index: 1000;
    }

    #entity-details.visible {
      opacity: 1;
    }

    #entity-details .detail-row {
      display: flex;
      justify-content: space-between;
      margin: 2px 0;
    }

    /* Instructions overlay */
    #instructions {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(12px);
      color: #fff;
      padding: 40px;
      border-radius: 16px;
      text-align: center;
      border: 2px solid rgba(255, 220, 120, 0.3);
      max-width: 500px;
      z-index: 2000;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
      to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }

    #instructions.hidden {
      animation: fadeOut 0.5s ease-out forwards;
    }

    @keyframes fadeOut {
      from { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      to { opacity: 0; transform: translate(-50%, -50%) scale(0.9); pointer-events: none; }
    }

    #instructions h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #ffdc78;
    }

    #instructions p {
      font-size: 16px;
      line-height: 1.8;
      margin: 12px 0;
    }

    #instructions em {
      color: #ffdc78;
      font-style: normal;
      font-weight: 600;
    }

    #instructions button {
      margin-top: 20px;
      padding: 12px 24px;
      font-size: 14px;
      background: rgba(255, 220, 120, 0.2);
      border: 2px solid #ffdc78;
      color: #ffdc78;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s;
    }

    #instructions button:hover {
      background: rgba(255, 220, 120, 0.3);
      transform: scale(1.05);
    }

    /* Speech bubble */
    .speech-bubble {
      position: absolute;
      background: rgba(255, 255, 255, 0.95);
      color: #000;
      padding: 8px 12px;
      border-radius: 12px;
      font-family: system-ui;
      font-size: 14px;
      font-weight: 500;
      pointer-events: none;
      white-space: nowrap;
      z-index: 100;
      animation: bubblePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes bubblePop {
      0% { opacity: 0; transform: scale(0.5) translateY(10px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      bottom: -6px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid rgba(255, 255, 255, 0.95);
    }
  </style>
</head>
<body>
  <!-- Dev Tools Overlay -->
  <div id="dev-tools">
    <strong>üåå MDS v4 Sandbox</strong>
    <div class="stat">
      <span class="stat-label">Entities:</span>
      <span class="stat-value" id="stat-entities">0</span>
    </div>
    <div class="stat">
      <span class="stat-label">Fields:</span>
      <span class="stat-value" id="stat-fields">0</span>
    </div>
    <div class="stat">
      <span class="stat-label">FPS:</span>
      <span class="stat-value" id="stat-fps">60</span>
    </div>
    <div style="margin-top: 12px;">
      <button id="pause-btn">‚è∏ Pause</button>
      <button id="clear-btn">üóëÔ∏è Clear</button>
    </div>
  </div>

  <!-- Entity Details (on hover) -->
  <div id="entity-details"></div>

  <!-- Instructions Overlay -->
  <div id="instructions">
    <h2>üåå Living Materials Sandbox</h2>
    <p><strong>üê• Curious</strong> ‚Äî follows your cursor, speaks on hover</p>
    <p><strong>üíå Shy</strong> ‚Äî glows softly, runs away after 3 hovers</p>
    <p><strong>‚ú® Trust Field</strong> ‚Äî spawns when they stay close 3 seconds</p>
    <p><em>Click anywhere to spawn more entities</em></p>
    <button id="start-btn">Start Simulation</button>
  </div>

  <!-- Inline Material Definitions -->
  <script type="application/json" data-material="button.curious">
  {
    "material": "button.curious",
    "essence": "‡∏™‡∏ô‡πÉ‡∏à‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏´‡πá‡∏ô ‡πÄ‡∏•‡∏¢‡∏Ç‡∏¢‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏Å‡∏•‡πâ",
    "intent": "explore",
    "manifestation": {
      "emoji": "üê•",
      "aging": {
        "start_opacity": 1,
        "decay_rate": 0.002
      }
    },
    "physics": {
      "mass": 0.1,
      "friction": 0.03
    },
    "behavior": {
      "onHover": {
        "effect": "glow.soft",
        "speak": "Hi there! üëã"
      },
      "followCursor": true
    }
  }
  </script>

  <script type="application/json" data-material="button.shy">
  {
    "material": "button.shy",
    "essence": "‡∏≠‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÇ‡∏ô‡πâ‡∏ï‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Å‡∏•‡πâ‡∏≤‡∏™‡πà‡∏á",
    "intent": "observe",
    "manifestation": {
      "emoji": "üíå",
      "aging": {
        "start_opacity": 1,
        "decay_rate": 0.005
      }
    },
    "physics": {
      "mass": 0.08,
      "friction": 0.02
    },
    "behavior": {
      "onHover": {
        "effect": "glow.soft"
      },
      "onRepeatHover": {
        "threshold": 3,
        "effect": "slide.away",
        "emoji": "ü´£"
      }
    }
  }
  </script>

  <script type="application/json" data-material="field.trust">
  {
    "material": "field.trust",
    "type": "field",
    "radius": 140,
    "duration": 45000,
    "visual": {
      "aura": "amber"
    },
    "effect_on_others": {
      "opacity": 0.95
    }
  }
  </script>

  <!-- MDS v4 Engine + Extensions (Inline) -->
  <script type="module">
    // === INLINE MDS v4 CORE (from dist/mds-core.esm.js) ===
    const clamp = (v, lo = 0, hi = 1) => Math.max(lo, Math.min(hi, v));
    const distance = (x1, y1, x2, y2) => Math.hypot(x2 - x1, y2 - y1);
    const similarity = (a, b) => 1 - Math.abs(a - b);

    function applyRule(rule, entity) {
      if (!rule.effect) return;
      if (rule.effect.includes("glow")) {
        entity.el.style.filter = "drop-shadow(0 0 12px rgba(255,220,120,.9))";
        setTimeout(() => entity.el.style.filter = "", 300);
      }
      if (rule.effect.includes("slide")) {
        entity.vx += (Math.random() - 0.5) * 3;
        entity.vy += (Math.random() - 0.5) * 3;
      }
      if (rule.emoji) {
        entity.el.textContent = rule.emoji;
      }

      // Speech bubble
      if (rule.speak) {
        showSpeechBubble(entity, rule.speak);
      }
    }

    // === HASH ESSENCE ‚Üí ENTROPY ===
    function hashEssence(essence) {
      let hash = 0;
      const str = typeof essence === 'string' ? essence : (essence?.th || essence?.en || '');
      for (let i = 0; i < str.length; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash = hash & hash;
      }
      return Math.abs(hash % 100) / 100;
    }

    // === ENTITY CLASS (with cursor tracking) ===
    class Entity {
      constructor(m, x = Math.random() * window.innerWidth * 0.8 + window.innerWidth * 0.1,
                     y = Math.random() * window.innerHeight * 0.8 + window.innerHeight * 0.1) {
        this.m = m;
        this.x = x;
        this.y = y;
        this.vx = 0;
        this.vy = 0;
        this.age = 0;
        this.opacity = m.manifestation?.aging?.start_opacity ?? 1;
        this.hoverCount = 0;
        this.lastHoverTime = 0;

        // Entropy from essence hash
        this.entropy = m.essence ? hashEssence(m.essence) : Math.random();
        this.energy = Math.random();

        // Create DOM element
        this.el = document.createElement("div");
        this.el.className = "mds-entity";
        this.el.style.position = "absolute";
        this.el.style.willChange = "transform, opacity, filter";
        this.el.dataset.material = m.material;
        this.el.textContent = m.manifestation?.emoji ?? "üìÑ";

        // Spawn animation
        this.el.style.opacity = "0";
        this.el.style.transform = `translate(${x}px, ${y}px) scale(0.5)`;
        document.body.appendChild(this.el);

        requestAnimationFrame(() => {
          this.el.style.transition = "opacity 0.4s, transform 0.4s";
          this.el.style.opacity = String(this.opacity);
          this.el.style.transform = `translate(${x}px, ${y}px) scale(1)`;
        });

        this.attachDOMHandlers();
      }

      attachDOMHandlers() {
        this.el.addEventListener("mouseover", () => {
          const now = performance.now();
          if (now - this.lastHoverTime < 700) {
            this.hoverCount++;
          } else {
            this.hoverCount = 1;
          }
          this.lastHoverTime = now;

          const rule = this.m.behavior?.onHover;
          if (rule) applyRule(rule, this);

          const r2 = this.m.behavior?.onRepeatHover;
          if (r2 && this.hoverCount >= (r2.threshold ?? 3)) {
            applyRule(r2, this);
          }

          // Show entity details
          showEntityDetails(this);
        });

        this.el.addEventListener("mouseout", () => {
          hideEntityDetails();
        });
      }

      update(dt, cursorX, cursorY) {
        this.age += dt;

        // Aging/decay
        const decay = this.m.manifestation?.aging?.decay_rate ?? 0;
        if (decay > 0) {
          this.opacity = clamp(this.opacity - decay * dt, 0, 1);
        }

        // Cursor tracking for curious behavior
        if (this.m.behavior?.followCursor) {
          const dx = cursorX - this.x;
          const dy = cursorY - this.y;
          const dist = Math.hypot(dx, dy);

          if (dist > 60) {  // Don't get too close
            const force = 0.03;
            this.vx += (dx / dist) * force;
            this.vy += (dy / dist) * force;
          }
        }

        // Friction
        const fr = this.m.physics?.friction ?? 0.02;
        this.vx *= (1 - fr);
        this.vy *= (1 - fr);

        // Fade effect when almost gone
        if (this.opacity < 0.15) {
          this.el.style.filter = 'blur(2px)';
        }
      }

      integrateAndRender() {
        this.x += this.vx;
        this.y += this.vy;

        // Boundary wrap
        if (this.x < -50) this.x = window.innerWidth + 50;
        if (this.x > window.innerWidth + 50) this.x = -50;
        if (this.y < -50) this.y = window.innerHeight + 50;
        if (this.y > window.innerHeight + 50) this.y = -50;

        this.el.style.opacity = String(this.opacity);
        this.el.style.transform = `translate(${this.x}px, ${this.y}px)`;
      }

      destroy() {
        this.el.remove();
      }
    }

    // === FIELD CLASS ===
    class Field {
      constructor(f, x, y) {
        this.f = f;
        this.x = x;
        this.y = y;
        this.t = 0;
        this.expired = false;

        if (f.visual) {
          this.createVisualElement();
        }
      }

      createVisualElement() {
        this.el = document.createElement("div");
        this.el.className = "mds-field";
        this.el.style.position = "absolute";
        this.el.style.pointerEvents = "none";
        const diameter = this.f.radius * 2;
        this.el.style.width = `${diameter}px`;
        this.el.style.height = `${diameter}px`;
        this.el.style.transform = `translate(${this.x - this.f.radius}px, ${this.y - this.f.radius}px)`;
        this.el.style.borderRadius = "50%";
        this.el.style.background = `radial-gradient(
          circle,
          rgba(255, 200, 100, 0.3) 0%,
          rgba(255, 200, 100, 0.08) 40%,
          transparent 100%
        )`;

        // Spawn animation
        this.el.style.opacity = "0";
        this.el.style.transform = `translate(${this.x - this.f.radius}px, ${this.y - this.f.radius}px) scale(0.5)`;
        document.body.appendChild(this.el);

        requestAnimationFrame(() => {
          this.el.style.transition = "opacity 0.6s, transform 0.6s";
          this.el.style.opacity = "0.6";
          this.el.style.transform = `translate(${this.x - this.f.radius}px, ${this.y - this.f.radius}px) scale(1)`;
        });
      }

      update(dt, entities) {
        this.t += dt * 1000;
        if (this.t > this.f.duration) {
          this.expired = true;
          this.el?.remove();
          return;
        }

        // Apply effects to entities within radius
        for (const e of entities) {
          const d = distance(this.x, this.y, e.x, e.y);
          if (d <= this.f.radius) {
            if (typeof this.f.effect_on_others?.opacity === "number") {
              const targetOpacity = Number(this.f.effect_on_others.opacity);
              e.opacity = Math.max(e.opacity, Math.min(1, targetOpacity));
            }
          }
        }

        // Visual fade
        if (this.el) {
          const fadeProgress = this.t / this.f.duration;
          const opacity = 0.6 - fadeProgress * 0.4;
          this.el.style.opacity = String(opacity);
        }
      }

      destroy() {
        this.expired = true;
        this.el?.remove();
      }
    }

    // === PROXIMITY TRACKER (for trust field spawning) ===
    class ProximityTracker {
      constructor() {
        this.timers = new Map();
        this.spawned = new Set();
      }

      update(dt, entityA, entityB, dist, engine, trustField) {
        const key = [entityA.m.material, entityB.m.material].sort().join('-');

        if (dist < 100) {
          const elapsed = (this.timers.get(key) || 0) + dt;
          this.timers.set(key, elapsed);

          // Spawn trust field after 3 seconds
          if (elapsed >= 3 && !this.spawned.has(key)) {
            const midX = (entityA.x + entityB.x) / 2;
            const midY = (entityA.y + entityB.y) / 2;
            engine.spawnField(trustField, midX, midY);
            this.spawned.add(key);
            console.log('‚ú® Trust field spawned!', { elapsed: elapsed.toFixed(1), entities: key });
          }
        } else {
          // Reset if they move apart
          this.timers.delete(key);
        }
      }

      reset() {
        this.timers.clear();
        this.spawned.clear();
      }
    }

    // === ENGINE CLASS ===
    class Engine {
      constructor() {
        this.entities = [];
        this.fields = [];
        this.running = false;
        this.last = 0;
        this.proximityTracker = new ProximityTracker();
      }

      spawn(material, x, y) {
        const e = new Entity(material, x, y);
        this.entities.push(e);
        return e;
      }

      spawnField(fs, x, y) {
        const f = new Field(fs, x, y);
        this.fields.push(f);
        return f;
      }

      start() {
        if (this.running) return;
        this.running = true;
        this.last = performance.now();

        const loop = (t) => {
          if (!this.running) return;
          const dt = (t - this.last) / 1000;
          this.last = t;
          this.tick(dt);
          requestAnimationFrame(loop);
        };

        requestAnimationFrame(loop);
      }

      stop() {
        this.running = false;
      }

      tick(dt) {
        // Update entities
        for (const e of this.entities) {
          e.update(dt, cursorX, cursorY);
        }

        // Pairwise info-physics forces
        for (let i = 0; i < this.entities.length; i++) {
          for (let j = i + 1; j < this.entities.length; j++) {
            const a = this.entities[i];
            const b = this.entities[j];
            const dx = b.x - a.x;
            const dy = b.y - a.y;
            const dist = Math.hypot(dx, dy) || 1;

            // Similarity-based attraction
            const sim = 1 - Math.abs(a.entropy - b.entropy);
            const k = 0.05 * sim;

            if (dist < 200) {
              const fx = (dx / dist) * k;
              const fy = (dy / dist) * k;
              a.vx += fx * dt;
              a.vy += fy * dt;
              b.vx -= fx * dt;
              b.vy -= fy * dt;
            }

            // Proximity tracking (for trust field)
            this.proximityTracker.update(dt, a, b, dist, this, materials['field.trust']);
          }
        }

        // Update fields
        for (const f of this.fields) {
          f.update(dt, this.entities);
        }
        this.fields = this.fields.filter(f => !f.expired);

        // Integrate motion
        for (const e of this.entities) {
          e.integrateAndRender();
        }

        // Update stats
        updateStats();
      }

      clear() {
        for (const e of this.entities) {
          e.destroy();
        }
        for (const f of this.fields) {
          f.destroy();
        }
        this.entities = [];
        this.fields = [];
        this.proximityTracker.reset();
      }
    }

    // === GLOBAL CURSOR TRACKING ===
    let cursorX = window.innerWidth / 2;
    let cursorY = window.innerHeight / 2;

    document.addEventListener('mousemove', (e) => {
      cursorX = e.clientX;
      cursorY = e.clientY;
    });

    // === UI HELPERS ===
    function showSpeechBubble(entity, text) {
      const bubble = document.createElement('div');
      bubble.className = 'speech-bubble';
      bubble.textContent = text;
      bubble.style.left = `${entity.x}px`;
      bubble.style.top = `${entity.y - 60}px`;
      bubble.style.transform = 'translateX(-50%)';
      document.body.appendChild(bubble);

      setTimeout(() => bubble.remove(), 2000);
    }

    function showEntityDetails(entity) {
      const details = document.getElementById('entity-details');
      details.innerHTML = `
        <div style="font-weight: bold; color: #ffdc78; margin-bottom: 4px;">
          ${entity.m.manifestation?.emoji} ${entity.m.material}
        </div>
        <div class="detail-row">
          <span>Entropy:</span>
          <span>${entity.entropy.toFixed(3)}</span>
        </div>
        <div class="detail-row">
          <span>Age:</span>
          <span>${entity.age.toFixed(1)}s</span>
        </div>
        <div class="detail-row">
          <span>Opacity:</span>
          <span>${entity.opacity.toFixed(2)}</span>
        </div>
        <div class="detail-row">
          <span>Position:</span>
          <span>(${Math.round(entity.x)}, ${Math.round(entity.y)})</span>
        </div>
      `;
      details.classList.add('visible');
    }

    function hideEntityDetails() {
      document.getElementById('entity-details').classList.remove('visible');
    }

    let lastFpsUpdate = 0;
    let frameCount = 0;

    function updateStats() {
      frameCount++;
      const now = performance.now();

      if (now - lastFpsUpdate > 500) {
        const fps = Math.round((frameCount * 1000) / (now - lastFpsUpdate));
        document.getElementById('stat-fps').textContent = fps;
        frameCount = 0;
        lastFpsUpdate = now;
      }

      document.getElementById('stat-entities').textContent = engine.entities.length;
      document.getElementById('stat-fields').textContent = engine.fields.length;
    }

    // === LOAD INLINE MATERIALS ===
    const materials = {};
    document.querySelectorAll('script[type="application/json"][data-material]').forEach(script => {
      const name = script.dataset.material;
      materials[name] = JSON.parse(script.textContent);
    });

    // === INIT ENGINE ===
    const engine = new Engine();

    // === START BUTTON ===
    document.getElementById('start-btn').addEventListener('click', () => {
      document.getElementById('instructions').classList.add('hidden');

      // Spawn initial entities
      engine.spawn(materials['button.curious'], window.innerWidth * 0.3, window.innerHeight * 0.4);
      engine.spawn(materials['button.shy'], window.innerWidth * 0.7, window.innerHeight * 0.6);

      engine.start();
      console.log('üåå MDS v4 Sandbox started');
    });

    // === PAUSE/PLAY TOGGLE ===
    const pauseBtn = document.getElementById('pause-btn');
    pauseBtn.addEventListener('click', () => {
      if (engine.running) {
        engine.stop();
        pauseBtn.textContent = '‚ñ∂Ô∏è Play';
      } else {
        engine.start();
        pauseBtn.textContent = '‚è∏ Pause';
      }
    });

    // === CLEAR BUTTON ===
    document.getElementById('clear-btn').addEventListener('click', () => {
      engine.clear();
      console.log('üóëÔ∏è Cleared all entities and fields');
    });

    // === CLICK TO SPAWN ===
    document.addEventListener('click', (e) => {
      if (e.target === document.body || e.target.classList.contains('mds-entity') ||
          e.target.classList.contains('mds-field')) {
        const materialNames = ['button.curious', 'button.shy'];
        const randomMat = materials[materialNames[Math.floor(Math.random() * materialNames.length)]];
        engine.spawn(randomMat, e.clientX, e.clientY);
        console.log('‚ú® Spawned entity at', e.clientX, e.clientY);
      }
    });

    // Expose engine globally for debugging
    window.engine = engine;
    window.materials = materials;

    console.log('üåå MDS v4.0 Sandbox loaded');
    console.log('Materials:', Object.keys(materials));
  </script>
</body>
</html>
