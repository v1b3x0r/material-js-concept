/**
 * Material System v1.0.0 | MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.MaterialSystem=t()}("undefined"!=typeof self?self:this,function(){"use strict";const e={registry:{},tokens:{surface:{primary:"glass",secondary:"paper",elevated:"metal"},interactive:{default:"metal",primary:"glass",secondary:"paper"}},_theme:"dark",transitionDuration:"0.3s",register(e,t){return this.registry[e]=t,this},extend(e,t,r={}){const i=this.registry[t];return i?(this.registry[e]=this._deepMerge(i,r),this):(console.warn(`MaterialSystem: Base material "${t}" not found`),this)},apply(){return document.querySelectorAll("[data-material]").forEach(e=>{this.update(e)}),this},update(e){let t=e.getAttribute("data-material");t&&t.startsWith("@")&&(t=this._resolveToken(t));const r=this.registry[t];if(!r)return;const i=this._getStylesForState(r,"base");this._applyStyles(e,i),e.style.transition||(e.style.transition=`all ${this.transitionDuration} ease`),this._setupStateHandlers(e,r)},setTheme(e){return"dark"!==e&&"light"!==e?(console.warn(`MaterialSystem: Invalid theme "${e}". Use 'dark' or 'light'.`),this):(this._theme=e,document.documentElement.setAttribute("data-theme",e),this.apply(),this)},getTheme(){return this._theme},init(){return this._registerBuiltInMaterials(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.apply()):this.apply(),this._observeDOMChanges(),this},_getStylesForState(e,t){const r=e[this._theme]||{},i=e[t]||e.base||e;return{...r,...i}},_applyStyles(e,t){Object.keys(t).forEach(r=>{"base"!==r&&"hover"!==r&&"active"!==r&&"focus"!==r&&"disabled"!==r&&"dark"!==r&&"light"!==r&&(e.style[r]=t[r])})},_setupStateHandlers(e,t){e._materialHandlers?.forEach(({event:e,handler:t})=>{e.removeEventListener(e,t)});const r=[];if(t.hover){const i=()=>{if(!e.disabled){const r=this._getStylesForState(t,"hover");this._applyStyles(e,r)}},s=()=>{if(!e.disabled){const r=this._getStylesForState(t,"base");this._applyStyles(e,r)}};e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),r.push({event:"mouseenter",handler:i}),r.push({event:"mouseleave",handler:s})}if(t.active){const i=()=>{if(!e.disabled){const r=this._getStylesForState(t,"active");this._applyStyles(e,r)}},s=()=>{if(!e.disabled){const r=t.hover?this._getStylesForState(t,"hover"):this._getStylesForState(t,"base");this._applyStyles(e,r)}};e.addEventListener("mousedown",i),e.addEventListener("mouseup",s),r.push({event:"mousedown",handler:i}),r.push({event:"mouseup",handler:s})}if(t.focus){const i=()=>{if(!e.disabled){const r=this._getStylesForState(t,"focus");this._applyStyles(e,r)}},s=()=>{if(!e.disabled){const r=this._getStylesForState(t,"base");this._applyStyles(e,r)}};e.addEventListener("focus",i),e.addEventListener("blur",s),r.push({event:"focus",handler:i}),r.push({event:"blur",handler:s})}if(e.disabled&&t.disabled){const r=this._getStylesForState(t,"disabled");this._applyStyles(e,r)}e._materialHandlers=r},_resolveToken(e){const t=e.substring(1).split(".");let r=this.tokens;for(const e of t)if(r=r[e],void 0===r)return console.warn(`MaterialSystem: Token "${e}" not found`),null;return r},_deepMerge(e,t){const r={...e};return Object.keys(t).forEach(i=>{t[i]&&"object"==typeof t[i]&&!Array.isArray(t[i])?r[i]=this._deepMerge(e[i]||{},t[i]):r[i]=t[i]}),r},_observeDOMChanges(){new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{1===e.nodeType&&(e.hasAttribute("data-material")&&this.update(e),e.querySelectorAll("[data-material]").forEach(e=>{this.update(e)}))})})}).observe(document.body,{childList:!0,subtree:!0})},_registerBuiltInMaterials(){this.register("glass",{base:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",borderRadius:"12px",color:"#ffffff"},hover:{backdropFilter:"blur(15px)",WebkitBackdropFilter:"blur(15px)",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.2)",transform:"translateY(-2px)"},active:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transform:"translateY(0) scale(0.98)"},disabled:{opacity:"0.5",cursor:"not-allowed"},light:{background:"rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.1)",color:"#2d1b3d"}}),this.register("metal",{base:{background:"linear-gradient(135deg, #434343 0%, #282828 100%)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)",borderRadius:"8px",color:"#e0e0e0"},hover:{background:"linear-gradient(135deg, #4a4a4a 0%, #2f2f2f 100%)",boxShadow:"0 6px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)",transform:"translateY(-2px)"},active:{background:"linear-gradient(135deg, #383838 0%, #232323 100%)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transform:"translateY(0) scale(0.98)"},disabled:{opacity:"0.5",cursor:"not-allowed"},light:{background:"linear-gradient(135deg, #e0e0e0 0%, #c0c0c0 100%)",color:"#2d1b3d"}}),this.register("paper",{base:{background:"#f5f5f5",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.05)",borderRadius:"8px",color:"#2d1b3d"},hover:{boxShadow:"0 4px 16px rgba(0, 0, 0, 0.15)",transform:"translateY(-2px)"},active:{boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",transform:"translateY(0) scale(0.98)"},disabled:{opacity:"0.6",cursor:"not-allowed"},dark:{background:"#2a2a2a",color:"#e0e0e0",border:"1px solid rgba(255, 255, 255, 0.1)"}}),this.register("wood",{base:{background:"linear-gradient(135deg, #8b6f47 0%, #6b5639 100%)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"8px",color:"#f5e6d3",backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px)"},hover:{boxShadow:"0 6px 18px rgba(0, 0, 0, 0.4)",transform:"translateY(-2px)",filter:"brightness(1.1)"},active:{boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",transform:"translateY(0) scale(0.98)",filter:"brightness(0.95)"},disabled:{opacity:"0.5",cursor:"not-allowed"}}),this.register("fabric",{base:{background:"#e8d5c4",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"16px",color:"#3d3d3d",backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,0.02) 10px, rgba(0,0,0,0.02) 20px)"},hover:{boxShadow:"0 4px 18px rgba(0, 0, 0, 0.2)",transform:"translateY(-2px)"},active:{boxShadow:"0 1px 6px rgba(0, 0, 0, 0.15)",transform:"translateY(0) scale(0.98)"},disabled:{opacity:"0.6",cursor:"not-allowed"},dark:{background:"#4a3f35",color:"#e8d5c4"}})}};return"undefined"!=typeof window&&e.init(),e});
